---
title: cf-for-k8s (CF4K8s)をKind上にインストールする
tags: ["Cloud Foundry", "Kubernetes", "CF4K8s"]
categories: ["Dev", "PaaS", "CloudFoundry", "CF4K8s"]
---


Cloud FoundryをKubernetes上にインストールする[cf-for-k8s (CF4K8s)](https://github.com/cloudfoundry/cf-for-k8s)の0.1.0がリリースされたので試してみます。
今回は[Kind](https://github.com/kubernetes-sigs/kind)をLaptopにインストールし、その上にCloud Foundryをインストールします。

> CFをk8s上にデプロイするプロジェクトとしては[KubeCF](https://github.com/cloudfoundry-incubator/kubecf)もありますが、
> KubeCFは既存のCFのコンポーネントをBOSHの概念と共にKubenetesに移植したプロジェクトです。既存のCF利用者からすると短期的にはKubeCFの方が移行しやすいかもしれません。
> 一方、cf-for-k8sは、CFのコンポーネントをKubernetesの世界に合わせて置き換えたり(Envoy, Istio, Fluentd, Kpackなど)、書き換えたりしています。
> 既存CF利用者視点での互換性はKubeCFに比べて低いですが、将来的に見るとcf-for-k8sのアプローチの方が正しいように思えます。ちなみにKubeCFはHelmでインストールし、cf-for-k8sは[kapp](https://get-kapp.io/)でインストールします。
> cf-for-k8sは[VMware Tanzu Application Service for Kubernetes (TAS for k8s)](https://network.pivotal.io/products/tas-for-kubernetes)のベースとなっています。

本記事の内容は基本的に次のドキュメントの通りです。

https://github.com/cloudfoundry/cf-for-k8s/blob/master/docs/deploy-local.md

### CLIのインストール

* [`kubectl`](https://github.com/kubernetes/kubectl)
* [`kind`](https://github.com/kubernetes-sigs/kind)
* [`kapp`](https://get-kapp.io/) (cf-for-k8sのデプロイに使用します)
* [`ytt`](https://get-ytt.io/) (yamlのpatchを適用するために使用します)
* [`bosh`](https://github.com/cloudfoundry/bosh-cli) (yaml内のパスワードとTLS証明書を自動生成するために使用します)
* [`cf`](https://github.com/cloudfoundry/cli)

をインストールします。

```
brew install kubectl
brew install kind
brew install k14s/tap/kapp
brew install k14s/tap/ytt
brew install cloudfoundry/tap/bosh-cli
brew install cloudfoundry/tap/cf-cli
```

動作確認したバージョンは

```
$ kind --version
kind version 0.7.0

$ kubectl version --client=true 
Client Version: version.Info{Major:"1", Minor:"17", GitVersion:"v1.17.3", GitCommit:"06ad960bfd03b39c8310aaf92d1e7c12ce618213", GitTreeState:"clean", BuildDate:"2020-02-13T18:08:14Z", GoVersion:"go1.13.8", Compiler:"gc", Platform:"darwin/amd64"}

$ kapp version
kapp version 0.24.

$ ytt version
ytt version 0.27.1

$ bosh -v      
version 6.2.1-a28042ac-2020-02-10T18:41:00Z

$ cf -v
cf version 6.51.0+2acd15650.2020-04-07
```

です。

### cf-for-k8sマニフェストの取得

[`0.1.0`](https://github.com/cloudfoundry/cf-for-k8s/releases/tag/v0.1.0)を使用します。

```
git clone https://github.com/cloudfoundry/cf-for-k8s.git -b v0.1.0
```

### Kubernetesクラスターの作成

cf-for-k8sで使用するKubernetesをKindで作成します。Kind用のconfigは[`cf-for-k8s/deploy/kind/cluster.yml`](https://github.com/cloudfoundry/cf-for-k8s/blob/v0.1.0/deploy/kind/cluster.yml)に用意されています。

```
kind create cluster --config=./cf-for-k8s/deploy/kind/cluster.yml
```

Kindでは`LoadBalancer` typeの`Service`を作成できないため、hostの`443`ポートをKind内の`31443`ポートに、hostの`80`ポートを`31080`ポートにマッピングするように設定し、
cf-for-k8sが`LoadBalancer`の代わりに`NodePort`を使用しても、ホストから`443` or `80`ポートでアクセスできるようにしています。

クラスタが作成されたら`kubectl`で動作確認します。

```
$ kubectl cluster-info
Kubernetes master is running at https://127.0.0.1:32769
KubeDNS is running at https://127.0.0.1:32769/api/v1/namespaces/kube-system/services/kube-dns:dns/proxy

$ kubectl get node
NAME                 STATUS   ROLES    AGE   VERSION
kind-control-plane   Ready    master   10m   v1.17.0

$ kubectl get pod -A
NAMESPACE            NAME                                         READY   STATUS    RESTARTS   AGE
kube-system          coredns-6955765f44-n4qzd                     1/1     Running   0          3m42s
kube-system          coredns-6955765f44-thqj8                     1/1     Running   0          3m42s
kube-system          etcd-kind-control-plane                      1/1     Running   0          3m57s
kube-system          kindnet-s9l7m                                1/1     Running   0          3m42s
kube-system          kube-apiserver-kind-control-plane            1/1     Running   0          3m57s
kube-system          kube-controller-manager-kind-control-plane   1/1     Running   0          3m57s
kube-system          kube-proxy-jfbm8                             1/1     Running   0          3m42s
kube-system          kube-scheduler-kind-control-plane            1/1     Running   0          3m57s
local-path-storage   local-path-provisioner-7745554f7f-vnwh9      1/1     Running   0          3m42s
```

KindにはMetrics Serverが含まれておらず、これがないと[`cf push`でエラーが発生する](https://github.com/cloudfoundry/cf-for-k8s/issues/123)ので、Metrics Serverを別途インストールしておきます。

```
kubectl apply -f https://github.com/kubernetes-sigs/metrics-server/releases/download/v0.3.6/components.yaml
```

### Cloud Foundryのインストール

いよいよk8s上にCloud Foundryをインストールを行います。

まずは、ソースコードを`cf push`した際にCloud Native Buildpackで作成されるDockerイメージをデプロイするDockerレジストリのアカウント情報を設定します。
ここではDockerHubを使用します。
また、パスワードや証明書を自動生成して`./cf-for-k8s/hack/generate-values.sh`を実行して設定値を作成します。
CFのドメインには`local.maki.lol`を使用します。

> `*.locall.maki.lol`及び`*.apps.local.maki.lol`、`*.sys.local.maki.lol`はAレコードで`127.0.0.1`を返すように登録s亭あります。誰でも利用可能です。


```
export DOCKERHUB_USERNAME=.......
export DOCKERHUB_PASSWORD=....

./cf-for-k8s/hack/generate-values.sh -d local.maki.lol > /tmp/cf-values.yml

cat <<EOF >> /tmp/cf-values.yml
app_registry:
   hostname: https://index.docker.io/v1/
   repository: ${DOCKERHUB_USERNAME}
   username: ${DOCKERHUB_USERNAME}
   password: ${DOCKERHUB_PASSWORD}
EOF
```

設定ファイルは`/tmp/cf-value.yml`に出力されます。`kapp`及び`ytt`を使用して次のコマンドでデプロイします。

```
kapp deploy -a cf \
  -f <(ytt -f ./cf-for-k8s/config \
           -f /tmp/cf-values.yml \
           -f ./cf-for-k8s/config-optional/remove-resource-requirements.yml \
           -f ./cf-for-k8s/config-optional/use-nodeport-for-ingress.yml)
```


ベースのマニフェストファイルは`cf-for-k8s/config`に含まれます。これに対して、次の差分ファイルを`ytt`で適用しています。

* `cf-for-k8s/config-optional/remove-resource-requirements.yml` ... Kindでもデプロイできるようにリソース(CPU、メモリ)の下限の制約を除外する
* `cf-for-k8s/config-optional/use-nodeport-for-ingress.yml` ... IstionのIngress Gatewayに`NodePort`を使用する

<details>
  <summary>実行例(クリックして確認)</summary>

```
$ kapp deploy -a cf \
  -f <(ytt -f ./cf-for-k8s/config \
           -f /tmp/cf-values.yml \
           -f ./cf-for-k8s/config-optional/remove-resource-requirements.yml \
           -f ./cf-for-k8s/config-optional/use-nodeport-for-ingress.yml)
Target cluster 'https://127.0.0.1:32768' (nodes: kind-control-plane)

Changes

Namespace             Name                                                            Kind                          Conds.  Age  Op      Wait to    Rs  Ri  
(cluster)             adapters.config.istio.io                                        CustomResourceDefinition      -       -    create  reconcile  -   -  
^                     aggregate-metacontroller-edit                                   ClusterRole                   -       -    create  reconcile  -   -  
^                     aggregate-metacontroller-view                                   ClusterRole                   -       -    create  reconcile  -   -  
^                     attributemanifests.config.istio.io                              CustomResourceDefinition      -       -    create  reconcile  -   -  
^                     authorizationpolicies.security.istio.io                         CustomResourceDefinition      -       -    create  reconcile  -   -  
^                     builders.build.pivotal.io                                       CustomResourceDefinition      -       -    create  reconcile  -   -  
^                     builds.build.pivotal.io                                         CustomResourceDefinition      -       -    create  reconcile  -   -  
^                     cc-api-service-account-superuser                                ClusterRoleBinding            -       -    create  reconcile  -   -  
^                     cf-blobstore                                                    Namespace                     -       -    create  reconcile  -   -  
^                     cf-db                                                           Namespace                     -       -    create  reconcile  -   -  
^                     cf-system                                                       Namespace                     -       -    create  reconcile  -   -  
^                     cf-workloads                                                    Namespace                     -       -    create  reconcile  -   -  
^                     cf-workloads-app-psp                                            PodSecurityPolicy             -       -    create  reconcile  -   -  
^                     cf-workloads-privileged-app-psp                                 PodSecurityPolicy             -       -    create  reconcile  -   -  
^                     cf-workloads-staging                                            Namespace                     -       -    create  reconcile  -   -  
^                     cfroutesync                                                     CompositeController           -       -    create  reconcile  -   -  
^                     clusterbuilders.build.pivotal.io                                CustomResourceDefinition      -       -    create  reconcile  -   -  
^                     clusterrbacconfigs.rbac.istio.io                                CustomResourceDefinition      -       -    create  reconcile  -   -  
^                     compositecontrollers.metacontroller.k8s.io                      CustomResourceDefinition      -       -    create  reconcile  -   -  
^                     controllerrevisions.metacontroller.k8s.io                       CustomResourceDefinition      -       -    create  reconcile  -   -  
^                     custombuilders.experimental.kpack.pivotal.io                    CustomResourceDefinition      -       -    create  reconcile  -   -  
^                     customclusterbuilders.experimental.kpack.pivotal.io             CustomResourceDefinition      -       -    create  reconcile  -   -  
^                     decoratorcontrollers.metacontroller.k8s.io                      CustomResourceDefinition      -       -    create  reconcile  -   -  
^                     default                                                         MeshPolicy                    -       -    create  reconcile  -   -  
^                     destinationrules.networking.istio.io                            CustomResourceDefinition      -       -    create  reconcile  -   -  
^                     eirini                                                          PodSecurityPolicy             -       -    create  reconcile  -   -  
^                     envoyfilters.networking.istio.io                                CustomResourceDefinition      -       -    create  reconcile  -   -  
^                     fluentd-service-account-pod-namespace-read                      ClusterRoleBinding            -       -    create  reconcile  -   -  
^                     gateways.networking.istio.io                                    CustomResourceDefinition      -       -    create  reconcile  -   -  
^                     handlers.config.istio.io                                        CustomResourceDefinition      -       -    create  reconcile  -   -  
^                     httpapispecbindings.config.istio.io                             CustomResourceDefinition      -       -    create  reconcile  -   -  
^                     httpapispecs.config.istio.io                                    CustomResourceDefinition      -       -    create  reconcile  -   -  
^                     images.build.pivotal.io                                         CustomResourceDefinition      -       -    create  reconcile  -   -  
^                     instances.config.istio.io                                       CustomResourceDefinition      -       -    create  reconcile  -   -  
^                     istio-citadel-istio-system                                      ClusterRole                   -       -    create  reconcile  -   -  
^                     istio-citadel-istio-system                                      ClusterRoleBinding            -       -    create  reconcile  -   -  
^                     istio-galley-admin-role-binding-istio-system                    ClusterRoleBinding            -       -    create  reconcile  -   -  
^                     istio-galley-istio-system                                       ClusterRole                   -       -    create  reconcile  -   -  
^                     istio-mixer-admin-role-binding-istio-system                     ClusterRoleBinding            -       -    create  reconcile  -   -  
^                     istio-mixer-istio-system                                        ClusterRole                   -       -    create  reconcile  -   -  
^                     istio-pilot-istio-system                                        ClusterRole                   -       -    create  reconcile  -   -  
^                     istio-pilot-istio-system                                        ClusterRoleBinding            -       -    create  reconcile  -   -  
^                     istio-policy                                                    ClusterRole                   -       -    create  reconcile  -   -  
^                     istio-policy-admin-role-binding-istio-system                    ClusterRoleBinding            -       -    create  reconcile  -   -  
^                     istio-reader-istio-system                                       ClusterRole                   -       -    create  reconcile  -   -  
^                     istio-reader-istio-system                                       ClusterRoleBinding            -       -    create  reconcile  -   -  
^                     istio-sidecar-injector                                          MutatingWebhookConfiguration  -       -    create  reconcile  -   -  
^                     istio-sidecar-injector-admin-role-binding-istio-system          ClusterRoleBinding            -       -    create  reconcile  -   -  
^                     istio-sidecar-injector-istio-system                             ClusterRole                   -       -    create  reconcile  -   -  
^                     istio-system                                                    Namespace                     -       -    create  reconcile  -   -  
^                     kpack                                                           Namespace                     -       -    create  reconcile  -   -  
^                     kpack-controller-admin                                          ClusterRole                   -       -    create  reconcile  -   -  
^                     kpack-controller-admin-binding                                  ClusterRoleBinding            -       -    create  reconcile  -   -  
^                     kpack-watcher                                                   ClusterRole                   -       -    create  reconcile  -   -  
^                     kpack-watcher-binding                                           ClusterRoleBinding            -       -    create  reconcile  -   -  
^                     kpack-webhook-certs-mutatingwebhookconfiguration-admin-binding  ClusterRoleBinding            -       -    create  reconcile  -   -  
^                     kpack-webhook-mutatingwebhookconfiguration-admin                ClusterRole                   -       -    create  reconcile  -   -  
^                     meshpolicies.authentication.istio.io                            CustomResourceDefinition      -       -    create  reconcile  -   -  
^                     metacontroller                                                  ClusterRole                   -       -    create  reconcile  -   -  
^                     metacontroller                                                  ClusterRoleBinding            -       -    create  reconcile  -   -  
^                     metacontroller                                                  Namespace                     -       -    create  reconcile  -   -  
^                     metric-proxy                                                    ClusterRole                   -       -    create  reconcile  -   -  
^                     metric-proxy                                                    ClusterRoleBinding            -       -    create  reconcile  -   -  
^                     pod-namespace-read                                              ClusterRole                   -       -    create  reconcile  -   -  
^                     policies.authentication.istio.io                                CustomResourceDefinition      -       -    create  reconcile  -   -  
^                     quotaspecbindings.config.istio.io                               CustomResourceDefinition      -       -    create  reconcile  -   -  
^                     quotaspecs.config.istio.io                                      CustomResourceDefinition      -       -    create  reconcile  -   -  
^                     rbacconfigs.rbac.istio.io                                       CustomResourceDefinition      -       -    create  reconcile  -   -  
^                     resource.webhook.kpack.pivotal.io                               MutatingWebhookConfiguration  -       -    create  reconcile  -   -  
^                     routebulksyncs.apps.cloudfoundry.org                            CustomResourceDefinition      -       -    create  reconcile  -   -  
^                     rules.config.istio.io                                           CustomResourceDefinition      -       -    create  reconcile  -   -  
^                     serviceentries.networking.istio.io                              CustomResourceDefinition      -       -    create  reconcile  -   -  
^                     servicerolebindings.rbac.istio.io                               CustomResourceDefinition      -       -    create  reconcile  -   -  
^                     serviceroles.rbac.istio.io                                      CustomResourceDefinition      -       -    create  reconcile  -   -  
^                     sidecars.networking.istio.io                                    CustomResourceDefinition      -       -    create  reconcile  -   -  
^                     sourceresolvers.build.pivotal.io                                CustomResourceDefinition      -       -    create  reconcile  -   -  
^                     stacks.experimental.kpack.pivotal.io                            CustomResourceDefinition      -       -    create  reconcile  -   -  
^                     stores.experimental.kpack.pivotal.io                            CustomResourceDefinition      -       -    create  reconcile  -   -  
^                     templates.config.istio.io                                       CustomResourceDefinition      -       -    create  reconcile  -   -  
^                     virtualservices.networking.istio.io                             CustomResourceDefinition      -       -    create  reconcile  -   -  
cf-blobstore          cf-blobstore-allow-plaintext                                    Policy                        -       -    create  reconcile  -   -  
^                     cf-blobstore-minio                                              ConfigMap                     -       -    create  reconcile  -   -  
^                     cf-blobstore-minio                                              Deployment                    -       -    create  reconcile  -   -  
^                     cf-blobstore-minio                                              PersistentVolumeClaim         -       -    create  reconcile  -   -  
^                     cf-blobstore-minio                                              Secret                        -       -    create  reconcile  -   -  
^                     cf-blobstore-minio                                              Service                       -       -    create  reconcile  -   -  
^                     cf-blobstore-minio                                              ServiceAccount                -       -    create  reconcile  -   -  
cf-db                 cf-db-admin-secret                                              Secret                        -       -    create  reconcile  -   -  
^                     cf-db-allow-plaintext                                           Policy                        -       -    create  reconcile  -   -  
^                     cf-db-credentials                                               Secret                        -       -    create  reconcile  -   -  
^                     cf-db-postgresql                                                Service                       -       -    create  reconcile  -   -  
^                     cf-db-postgresql                                                StatefulSet                   -       -    create  reconcile  -   -  
^                     cf-db-postgresql-headless                                       Service                       -       -    create  reconcile  -   -  
^                     cf-db-postgresql-init-scripts                                   ConfigMap                     -       -    create  reconcile  -   -  
cf-system             capi                                                            Service                       -       -    create  reconcile  -   -  
^                     capi-api-server                                                 Deployment                    -       -    create  reconcile  -   -  
^                     capi-clock                                                      Deployment                    -       -    create  reconcile  -   -  
^                     capi-deployment-updater                                         Deployment                    -       -    create  reconcile  -   -  
^                     capi-external-virtual-service                                   VirtualService                -       -    create  reconcile  -   -  
^                     capi-kpack-watcher                                              Deployment                    -       -    create  reconcile  -   -  
^                     capi-worker                                                     Deployment                    -       -    create  reconcile  -   -  
^                     cc-api-service-account                                          ServiceAccount                -       -    create  reconcile  -   -  
^                     cfroutesync                                                     Deployment                    -       -    create  reconcile  -   -  
^                     cfroutesync                                                     Secret                        -       -    create  reconcile  -   -  
^                     cfroutesync                                                     Service                       -       -    create  reconcile  -   -  
^                     cfroutesync-auth-metacontroller                                 AuthorizationPolicy           -       -    create  reconcile  -   -  
^                     cfroutesync-auth-prometheus                                     AuthorizationPolicy           -       -    create  reconcile  -   -  
^                     cfroutesync-config-ver-1                                        ConfigMap                     -       -    create  reconcile  -   -  
^                     cloud-controller-ng-yaml-ver-1                                  ConfigMap                     -       -    create  reconcile  -   -  
^                     eirini                                                          ConfigMap                     -       -    create  reconcile  -   -  
^                     eirini                                                          Deployment                    -       -    create  reconcile  -   -  
^                     eirini                                                          Service                       -       -    create  reconcile  -   -  
^                     eirini-internal-tls-certs                                       Secret                        -       -    create  reconcile  -   -  
^                     eirini-role                                                     Role                          -       -    create  reconcile  -   -  
^                     eirini-rolebinding                                              RoleBinding                   -       -    create  reconcile  -   -  
^                     fluentd                                                         DaemonSet                     -       -    create  reconcile  -   -  
^                     fluentd-config                                                  ConfigMap                     -       -    create  reconcile  -   -  
^                     fluentd-service-account                                         ServiceAccount                -       -    create  reconcile  -   -  
^                     istio-ingressgateway                                            Gateway                       -       -    create  reconcile  -   -  
^                     log-cache                                                       Deployment                    -       -    create  reconcile  -   -  
^                     log-cache                                                       Secret                        -       -    create  reconcile  -   -  
^                     log-cache                                                       Service                       -       -    create  reconcile  -   -  
^                     log-cache-ca                                                    Secret                        -       -    create  reconcile  -   -  
^                     log-cache-external-virtual-service                              VirtualService                -       -    create  reconcile  -   -  
^                     log-cache-gateway                                               Secret                        -       -    create  reconcile  -   -  
^                     log-cache-metrics                                               Secret                        -       -    create  reconcile  -   -  
^                     log-cache-syslog                                                Secret                        -       -    create  reconcile  -   -  
^                     log-cache-syslog                                                Service                       -       -    create  reconcile  -   -  
^                     metric-proxy                                                    Deployment                    -       -    create  reconcile  -   -  
^                     metric-proxy                                                    Service                       -       -    create  reconcile  -   -  
^                     metric-proxy                                                    ServiceAccount                -       -    create  reconcile  -   -  
^                     metric-proxy-ca                                                 Secret                        -       -    create  reconcile  -   -  
^                     metric-proxy-cert                                               Secret                        -       -    create  reconcile  -   -  
^                     nginx-ver-1                                                     ConfigMap                     -       -    create  reconcile  -   -  
^                     opi                                                             ServiceAccount                -       -    create  reconcile  -   -  
^                     opi-secrets                                                     Secret                        -       -    create  reconcile  -   -  
^                     uaa                                                             Deployment                    -       -    create  reconcile  -   -  
^                     uaa                                                             Service                       -       -    create  reconcile  -   -  
^                     uaa                                                             ServiceAccount                -       -    create  reconcile  -   -  
^                     uaa-certs                                                       Secret                        -       -    create  reconcile  -   -  
^                     uaa-config                                                      ConfigMap                     -       -    create  reconcile  -   -  
^                     uaa-external-virtual-service                                    VirtualService                -       -    create  reconcile  -   -  
cf-workloads          allow-app-ingress-from-ingressgateway                           NetworkPolicy                 -       -    create  reconcile  -   -  
^                     app-registry-credentials                                        Secret                        -       -    create  reconcile  -   -  
^                     cf-workloads-app-role                                           Role                          -       -    create  reconcile  -   -  
^                     cf-workloads-app-rolebinding                                    RoleBinding                   -       -    create  reconcile  -   -  
^                     cf-workloads-privileged-app-role                                Role                          -       -    create  reconcile  -   -  
^                     cf-workloads-privileged-app-rolebinding                         RoleBinding                   -       -    create  reconcile  -   -  
^                     default                                                         Sidecar                       -       -    create  reconcile  -   -  
^                     deny-app-ingress                                                NetworkPolicy                 -       -    create  reconcile  -   -  
^                     eirini                                                          ServiceAccount                -       -    create  reconcile  -   -  
^                     eirini-privileged                                               ServiceAccount                -       -    create  reconcile  -   -  
^                     eirini-role                                                     Role                          -       -    create  reconcile  -   -  
^                     eirini-rolebinding                                              RoleBinding                   -       -    create  reconcile  -   -  
^                     istio-ingress                                                   Gateway                       -       -    create  reconcile  -   -  
^                     kpack-watcher-pod-logs-binding                                  RoleBinding                   -       -    create  reconcile  -   -  
^                     kpack-watcher-pod-logs-reader                                   Role                          -       -    create  reconcile  -   -  
^                     route-bulk-sync                                                 RouteBulkSync                 -       -    create  reconcile  -   -  
cf-workloads-staging  cc-kpack-registry-auth-secret                                   Secret                        -       -    create  reconcile  -   -  
^                     cc-kpack-registry-service-account                               ServiceAccount                -       -    create  reconcile  -   -  
^                     cf-autodetect-builder                                           Builder                       -       -    create  reconcile  -   -  
istio-system          attributes                                                      instance                      -       -    create  reconcile  -   -  
^                     cf-prometheus                                                   handler                       -       -    create  reconcile  -   -  
^                     cf-promhttp                                                     rule                          -       -    create  reconcile  -   -  
^                     cfrequestcount                                                  instance                      -       -    create  reconcile  -   -  
^                     citadel-network-policy                                          NetworkPolicy                 -       -    create  reconcile  -   -  
^                     default                                                         Sidecar                       -       -    create  reconcile  -   -  
^                     galley-envoy-config                                             ConfigMap                     -       -    create  reconcile  -   -  
^                     ingressgateway                                                  Gateway                       -       -    create  reconcile  -   -  
^                     ingressgateway                                                  PodDisruptionBudget           -       -    create  reconcile  -   -  
^                     ingressgateway-network-policy-pilot                             NetworkPolicy                 -       -    create  reconcile  -   -  
^                     injector-mesh                                                   ConfigMap                     -       -    create  reconcile  -   -  
^                     istio                                                           ConfigMap                     -       -    create  reconcile  -   -  
^                     istio-citadel                                                   Deployment                    -       -    create  reconcile  -   -  
^                     istio-citadel                                                   PodDisruptionBudget           -       -    create  reconcile  -   -  
^                     istio-citadel                                                   Service                       -       -    create  reconcile  -   -  
^                     istio-citadel-service-account                                   ServiceAccount                -       -    create  reconcile  -   -  
^                     istio-galley                                                    Deployment                    -       -    create  reconcile  -   -  
^                     istio-galley                                                    PodDisruptionBudget           -       -    create  reconcile  -   -  
^                     istio-galley                                                    Service                       -       -    create  reconcile  -   -  
^                     istio-galley-configuration                                      ConfigMap                     -       -    create  reconcile  -   -  
^                     istio-galley-service-account                                    ServiceAccount                -       -    create  reconcile  -   -  
^                     istio-ingressgateway                                            DaemonSet                     -       -    create  reconcile  -   -  
^                     istio-ingressgateway                                            Service                       -       -    create  reconcile  -   -  
^                     istio-ingressgateway-certs                                      Secret                        -       -    create  reconcile  -   -  
^                     istio-ingressgateway-sds                                        Role                          -       -    create  reconcile  -   -  
^                     istio-ingressgateway-sds                                        RoleBinding                   -       -    create  reconcile  -   -  
^                     istio-ingressgateway-service-account                            ServiceAccount                -       -    create  reconcile  -   -  
^                     istio-mesh-galley                                               ConfigMap                     -       -    create  reconcile  -   -  
^                     istio-mixer-service-account                                     ServiceAccount                -       -    create  reconcile  -   -  
^                     istio-pilot                                                     Deployment                    -       -    create  reconcile  -   -  
^                     istio-pilot                                                     HorizontalPodAutoscaler       -       -    create  reconcile  -   -  
^                     istio-pilot                                                     PodDisruptionBudget           -       -    create  reconcile  -   -  
^                     istio-pilot                                                     Service                       -       -    create  reconcile  -   -  
^                     istio-pilot-service-account                                     ServiceAccount                -       -    create  reconcile  -   -  
^                     istio-policy                                                    Deployment                    -       -    create  reconcile  -   -  
^                     istio-policy                                                    DestinationRule               -       -    create  reconcile  -   -  
^                     istio-policy                                                    HorizontalPodAutoscaler       -       -    create  reconcile  -   -  
^                     istio-policy                                                    PodDisruptionBudget           -       -    create  reconcile  -   -  
^                     istio-policy                                                    Service                       -       -    create  reconcile  -   -  
^                     istio-policy-service-account                                    ServiceAccount                -       -    create  reconcile  -   -  
^                     istio-reader-service-account                                    ServiceAccount                -       -    create  reconcile  -   -  
^                     istio-sidecar-injector                                          ConfigMap                     -       -    create  reconcile  -   -  
^                     istio-sidecar-injector                                          Deployment                    -       -    create  reconcile  -   -  
^                     istio-sidecar-injector                                          PodDisruptionBudget           -       -    create  reconcile  -   -  
^                     istio-sidecar-injector                                          Service                       -       -    create  reconcile  -   -  
^                     istio-sidecar-injector-service-account                          ServiceAccount                -       -    create  reconcile  -   -  
^                     istio-telemetry                                                 Deployment                    -       -    create  reconcile  -   -  
^                     istio-telemetry                                                 DestinationRule               -       -    create  reconcile  -   -  
^                     istio-telemetry                                                 HorizontalPodAutoscaler       -       -    create  reconcile  -   -  
^                     istio-telemetry                                                 PodDisruptionBudget           -       -    create  reconcile  -   -  
^                     istio-telemetry                                                 Service                       -       -    create  reconcile  -   -  
^                     istioproxy                                                      attributemanifest             -       -    create  reconcile  -   -  
^                     kubeattrgenrulerule                                             rule                          -       -    create  reconcile  -   -  
^                     kubernetes                                                      attributemanifest             -       -    create  reconcile  -   -  
^                     kubernetesenv                                                   handler                       -       -    create  reconcile  -   -  
^                     mixer-network-policy                                            NetworkPolicy                 -       -    create  reconcile  -   -  
^                     pilot-envoy-config                                              ConfigMap                     -       -    create  reconcile  -   -  
^                     pilot-network-policy                                            NetworkPolicy                 -       -    create  reconcile  -   -  
^                     policy-envoy-config                                             ConfigMap                     -       -    create  reconcile  -   -  
^                     prometheus                                                      handler                       -       -    create  reconcile  -   -  
^                     promhttp                                                        rule                          -       -    create  reconcile  -   -  
^                     promtcp                                                         rule                          -       -    create  reconcile  -   -  
^                     promtcpconnectionclosed                                         rule                          -       -    create  reconcile  -   -  
^                     promtcpconnectionopen                                           rule                          -       -    create  reconcile  -   -  
^                     requestcount                                                    instance                      -       -    create  reconcile  -   -  
^                     requestduration                                                 instance                      -       -    create  reconcile  -   -  
^                     requestsize                                                     instance                      -       -    create  reconcile  -   -  
^                     responsesize                                                    instance                      -       -    create  reconcile  -   -  
^                     sidecar-injector-network-policy                                 NetworkPolicy                 -       -    create  reconcile  -   -  
^                     tcpbytereceived                                                 instance                      -       -    create  reconcile  -   -  
^                     tcpbytesent                                                     instance                      -       -    create  reconcile  -   -  
^                     tcpconnectionsclosed                                            instance                      -       -    create  reconcile  -   -  
^                     tcpconnectionsopened                                            instance                      -       -    create  reconcile  -   -  
^                     tcpkubeattrgenrulerule                                          rule                          -       -    create  reconcile  -   -  
^                     telemetry-envoy-config                                          ConfigMap                     -       -    create  reconcile  -   -  
kpack                 controller                                                      ServiceAccount                -       -    create  reconcile  -   -  
^                     kpack-controller                                                Deployment                    -       -    create  reconcile  -   -  
^                     kpack-webhook                                                   Deployment                    -       -    create  reconcile  -   -  
^                     kpack-webhook                                                   Service                       -       -    create  reconcile  -   -  
^                     kpack-webhook-certs-admin                                       Role                          -       -    create  reconcile  -   -  
^                     kpack-webhook-certs-admin-binding                               RoleBinding                   -       -    create  reconcile  -   -  
^                     webhook                                                         ServiceAccount                -       -    create  reconcile  -   -  
metacontroller        metacontroller                                                  ServiceAccount                -       -    create  reconcile  -   -  
^                     metacontroller                                                  StatefulSet                   -       -    create  reconcile  -   -  

Op:      245 create, 0 delete, 0 update, 0 noop
Wait to: 245 reconcile, 0 delete, 0 noop
```
</details>

